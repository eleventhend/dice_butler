<!DOCTYPE html>
<html>
<body>

<h1>Dice Butler</h1>
<p>Butles your dice</p>

<!--
    Basic dice roller form. Outputs a given number of rolls and their totals.
-->
<p id="basicroll"
<form class="diceroller">
Dice Pips: <input type="number" id="pips" name="DicePips" value="6"> &#9861 <br>
Iterations: <input type="number" id="iter" name="Iterations" value="1"> <br>
</form>
<button type="submit" style="height:30px; width:60px" onclick="rollcall()"> Roll </button>
</p>

<!--
    Basic attack roller form. Outputs a D20 based attack and custom damage roll
        based on inputs taken from the form.
-->

<p id="attack"
<form class="attacker">
Damage Pips: <input type="number" id="a_pips" name="DicePips" value="6"> &#9861 <br>
Damage Die #: <input type="number" id="a_iter" name="DicePips" value="1"> <br>
<!--Number of Attacks: <input type="text" id="a_iter" name="Iterations" value="1"> <br>-->
Base Attack Bonus: <input type="number" id="bab" name="Iterations"> <br>
Attack/Damage Mod: <input type="number" id="str" name="Iterations"> <br>
<!--Dexterity Mod: <input type="text" id="dex" name="Iterations" value=""> <br>-->
Smite <input type="checkbox" id="smite" name="Smite"> &#9841<br>
Charisma Mod: <input type="number" id="chr" name="Iterations"> <br>
Paladin Level: <input type="number" id="pallvl" name="Iterations"> <br>
</form>
<button type="submit" style="height:40px; width:200px" onclick="attack()"> &#9876 Attack! &#9876 </button>
</p>

<p id= "output"></p>

<script>
<!--

//Returns a pseudorandom integer between 1 and the given number of dice pips 
function roller(pips) {
    result = Math.floor(Math.random() * (pips)) + 1;
    return result
}

//Outputs individual dice rolls for a given number of iterations and dice pips
function rollcall() { 
    pips = document.getElementById("pips").value;
    iterations = document.getElementById("iter").value;
    total = 0;
    for (i = 1; i <= iterations; i++) {
        x = roller(pips);
        output.innerHTML = ("1" + "D" + pips + ": " + x + "<br>") + output.innerHTML;
        total += x;
    }
    output.innerHTML = "<br> Total: " + total + "<br>" + output.innerHTML;
}

//Outputs a single attack and damage roll based on inputs from the "attack" form
function attack() {
    output.innerHTML = "<br>" + output.innerHTML
    pips = document.getElementById("a_pips").value;
    iterations = document.getElementById("a_iter").value;
    bab = document.getElementById("bab").value;
    str = document.getElementById("str").value;
    chr = document.getElementById("chr").value;
    pallvl = document.getElementById("pallvl").value;
    damage = 0;
    smitedmg = 0;
    for (i = 1; i <= iterations; i++) {
        x = roller(pips);
        output.innerHTML = ("1" + "D" + pips + ": " + x + "<br>") + output.innerHTML;
        damage += x;
        if (document.getElementById("smite").checked == true) {
            damage += Number(pallvl);
        }
    }
    output.innerHTML = "Damage: " + damage + "<br>" + output.innerHTML;
    y = roller(20);
    output.innerHTML = ("1" + "D20: " + y + "<br>") + output.innerHTML;
    y += Number(bab) + Number(str);
    if (document.getElementById("smite").checked == true) {
        y += Number(chr);
    }
    output.innerHTML = ("Attack Roll: " + y + "<br>") + output.innerHTML;
}

//-->
</script>

</body>
</html>